/* Basic starter styling */
body {
    margin: 0;
    font-family: sans-serif;
    background-color: #0a3454;
    color: #fff;
  }

#game {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: linear-gradient(#f9fbff 0%, #eaf3ff 16.66%, #5ec7ff 16.66%, #2aa3e6 36%, #0b6fb8 100%);
  }

/* Air overlay (top 1/6) to ensure a whitish sky */
#air {
    position: absolute;
    left: 0; right: 0;
    top: 0;
    /* Extend slightly past the waterline so crests have white behind them */
    height: calc(100vh / 6 + 12px);
    background: linear-gradient(to bottom, rgba(255,255,255,0.98), rgba(255,255,255,0.75));
    z-index: 1;
    pointer-events: none;
  }

/* Waterline at 1/6 of the viewport height from the top */
#waterline {
    position: absolute;
    left: 0; right: 0;
    top: calc(100vh / 6);
    height: 12px;
    z-index: 2;
    pointer-events: none;
    /* Squiggly wave on top of a 2-color band: white above, light blue below */
    background:
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='12' viewBox='0 0 80 12'%3E%3Cpath d='M0 5 Q 10 0 20 5 T 40 5 T 60 5 T 80 5' fill='none' stroke='%233bb1ff' stroke-width='2' stroke-linecap='round'/%3E%3Cpath d='M0 6.5 Q 10 1.5 20 6.5 T 40 6.5 T 60 6.5 T 80 6.5' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E") repeat-x center,
      linear-gradient(to bottom, rgba(255,255,255,0.98) 0%, rgba(255,255,255,0.98) 50%, rgba(94,199,255,1) 50%, rgba(94,199,255,1) 100%);
    background-size: 80px 12px, 100% 100%;
  }

/* Boat at surface */
  .boat {
    position: absolute;
    top: calc(100vh / 6 - 34px); /* float a bit higher above ripple */
    width: 120px; height: 60px;
    transform-origin: 50% 50%;
    animation: bob 3.2s ease-in-out infinite;
    z-index: 6; /* above reefs; fish swims under */
    pointer-events: none;
  }
  .boat svg { width: 100%; height: 100%; display: block; }
  /* (reverted) */

/* Realistic aquarium background container */
#aquarium-bg { position:absolute; left:0; right:0; bottom:0; height: 62vh; z-index:1; pointer-events:none; }

/* God-rays */
#light-rays { position: absolute; left:0; right:0; top: calc(100vh/6); bottom:0; pointer-events:none; z-index:1;
  background:
    linear-gradient(115deg, rgba(255,255,255,0.12) 10%, rgba(255,255,255,0.0) 35%) 0 0/40% 100% no-repeat,
    linear-gradient(125deg, rgba(255,255,255,0.10) 8%, rgba(255,255,255,0.0) 32%) 20% 0/40% 100% no-repeat,
    linear-gradient(135deg, rgba(255,255,255,0.08) 6%, rgba(255,255,255,0.0) 28%) 40% 0/40% 100% no-repeat;
  mix-blend-mode: screen;
  opacity: 0.5;
}

/* Caustic shimmer */
#caustics { position:absolute; left:0; right:0; top: calc(100vh/6); bottom:0; pointer-events:none; z-index:1;
  background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 40%) 0 0/30% 30% repeat,
              radial-gradient(circle at 70% 40%, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0) 42%) 0 0/26% 26% repeat;
  animation: causticDrift 18s linear infinite;
}
@keyframes causticDrift {
  0% { background-position: 0 0, 0 0; }
  100% { background-position: 200px 120px, -160px 90px; }
}

/* Seafloor gradient to deepen bottom */
#seafloor { position:absolute; left:0; right:0; bottom:0; height: 16vh; pointer-events:none; z-index:1;
  background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.25) 100%);
}
  .boat .line {
    position: absolute;
    left: 110px; /* exact rod tip in SVG coords */
    top: 14px;
    width: 2px;
    height: calc(100vh - (100vh / 6)); /* down to bottom */
    background: linear-gradient(to bottom, rgba(30,60,100,0.6), rgba(30,60,100,0.3));
    transform-origin: top;
    z-index: 4; /* between reefs and fish */
  }
  .boat .hook {
    position: absolute;
    left: 100px; /* adjusted for SVG viewBox */
    top: 14px;
    width: 24px; height: 36px;
    z-index: 5;
    display: block;
  }
  .boat .hook path { vector-effect: non-scaling-stroke; }

@keyframes bob {
  0%   { transform: translateY(0) rotate(-0.6deg); }
  50%  { transform: translateY(-2px) rotate(0.6deg); }
  100% { transform: translateY(0) rotate(-0.6deg); }
}

#fish {
    position: absolute;
    left: 24px;
    top: 50vh;
    transform: translateY(-50%);
    font-size: 32px;
    line-height: 1;
    user-select: none;
    z-index: 5;
  }
/* Ambient bubbles */
#bubbles { position:absolute; left:0; right:0; top: calc(100vh/6); bottom:0; pointer-events:none; z-index:2; }
#bubbles::before, #bubbles::after { content:""; position:absolute; left:10%; bottom:6vh; width:2px; height:2px; background:transparent;
  box-shadow:  0 0 0 0 rgba(255,255,255,0.7),
               40vw 10vh 0 0 rgba(255,255,255,0.6),
               20vw 30vh 0 0 rgba(255,255,255,0.5),
               65vw 22vh 0 0 rgba(255,255,255,0.6),
               80vw 12vh 0 0 rgba(255,255,255,0.5),
               15vw 18vh 0 0 rgba(255,255,255,0.5);
  animation: bubbleUp 8s linear infinite;
}
#bubbles::after { left:35%; animation-duration: 12s; opacity:0.8; }
@keyframes bubbleUp {
  0% { transform: translateY(0) scale(1); opacity: 0.0; }
  10% { opacity: 0.6; }
  100% { transform: translateY(-70vh) scale(1.2); opacity: 0; }
}
  #fish .sprite { display: inline-block; font-size: 32px; width: 1em; height: 1em; }
  /* Emoji orientation mappings */
  /* Most platforms render üêü facing left by default (head on left). */
  #fish .face-left { transform: scaleX(1); }
  #fish .face-right { transform: scaleX(-1); }